<!DOCTYPE html>
<html lang='ko'>
<head>
    <meta charset='UTF-8'>
    <title>전사 SFE Strategic Master Report</title>
    <script src='https://cdn.tailwindcss.com'></script>
    <script src='https://cdn.jsdelivr.net/npm/chart.js'></script>
    <link href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css' rel='stylesheet'>
    <style>
        @import url('https://fonts.googleapis.com/gh/orioncactus/pretendard/dist/web/static/pretendard.css');
        body { background-color: #f8fafc; color: #1e293b; font-family: 'Pretendard', sans-serif; padding: 2rem; }
        .max-w-7xl { max-width: 1440px; margin: 0 auto; }
        .card { background: white; border-radius: 1.5rem; box-shadow: 0 10px 30px -10px rgba(0,0,0,0.05); border: 1px solid #e2e8f0; padding: 2rem; margin-bottom: 2rem; }
        .chart-container { position: relative; height: 350px; width: 100%; }
        select { background: white; border: 1px solid #cbd5e1; padding: 10px 18px; border-radius: 10px; color: #2563eb; font-weight: 800; outline: none; transition: all 0.2s; }
        .metric-label { font-size: 0.75rem; font-weight: 700; color: #64748b; text-transform: uppercase; }
        .metric-value { font-size: 2rem; font-weight: 900; line-height: 1.2; margin-top: 0.5rem; }
        .v-hidden { display: none; }
        .v-block { display: block; }
    </style>
</head>
<body>
    <div class='max-w-7xl mx-auto'>
        <header class='flex justify-between items-center mb-10'>
            <div>
                <h1 class='text-4xl font-black text-slate-900 tracking-tighter'>SFE STRATEGIC <span class='text-blue-600'>INTEL V13</span></h1>
                <p id='viewTitle' class='text-slate-500 font-bold text-xs mt-1 uppercase tracking-[0.2em]'>전사 마스터 통합 리포트</p>
            </div>
            <div class='flex gap-3'>
                <select id='bSel' class='v-block'><option value='TOTAL'>전체 지점</option></select>
                <select id='pSel'><option value='ALL'>모든 품목</option></select>
                <select id='rSel'><option value='NONE'>담당자 상세 선택</option></select>
            </div>
        </header>

        <!-- 6개 핵심 지표 카드 -->
        <div class='grid grid-cols-6 gap-4 mb-8'>
            <div class='card p-5 border-t-4 border-blue-600 mb-0'><p class='metric-label'>목표 달성률</p><h3 id='v_achieve' class='metric-value text-blue-600'>-</h3></div>
            <div class='card p-5 border-t-4 border-emerald-500 mb-0'><p class='metric-label'>핵심 성공 요인</p><h3 id='v_driver' class='text-xl font-black text-slate-800 mt-2'>-</h3></div>
            <div class='card p-5 border-t-4 border-amber-500 mb-0'><p class='metric-label'>성과지수(PI)</p><h3 id='v_pi' class='metric-value text-amber-500'>-</h3></div>
            <div class='card p-5 border-t-4 border-emerald-500 mb-0'><p class='metric-label'>성장지수(FGR)</p><h3 id='v_fgr' class='metric-value text-emerald-600'>-</h3></div>
            <div class='card p-5 border-l-4 border-slate-400 mb-0'><p class='metric-label'>영업 효율성</p><h3 id='v_efficiency' class='text-xl font-black text-slate-700 mt-2'>-</h3></div>
            <div id='quality_card' class='card p-5 border-l-4 border-slate-400 mb-0'><p class='metric-label'>데이터 정밀도</p><h3 id='v_precision' class='text-xl font-black text-slate-500 mt-2'>Extreme</h3></div>
        </div>

        <!-- 데이터 정밀도 경고 섹션 (레코드 누락) -->
        <div id='qualityAlert' class='hidden card border-l-8 border-rose-500 bg-rose-50'>
            <div class='flex items-center gap-3 mb-3'>
                <i class='fas fa-exclamation-triangle text-rose-600 text-2xl'></i>
                <h4 class='text-rose-900 font-black text-xl'>데이터 정밀도 경고: 목표값 누락 탐지</h4>
            </div>
            <p class='text-rose-700 text-sm mb-4'>아래 항목들은 <b>실적은 집계되었으나 설정된 목표값이 없어</b> 달성률이 0%로 표시되거나 분석에서 제외되었습니다.</p>
            <div class='grid grid-cols-4 gap-2' id='missingList'></div>
        </div>

        <!-- 데이터 헬스 가이드 (필드 매핑 안내) -->
        <div id='healthSection' class='hidden card border-l-8 border-blue-400 bg-blue-50/30'>
            <div class='flex justify-between items-center mb-4'>
                <div class='flex items-center gap-3'>
                    <i class='fas fa-microchip text-blue-500 text-2xl'></i>
                    <h4 class='text-slate-800 font-black text-xl'>시스템 데이터 매핑 헬스 체크</h4>
                </div>
                <div id='healthScore' class='px-4 py-1 rounded-full bg-blue-500 text-white font-black text-sm'>Score: 100</div>
            </div>
            <div class='grid grid-cols-2 md:grid-cols-4 gap-4' id='mappingStatus'>
                <!-- JS에서 생성 -->
            </div>
        </div>

        <!-- 그룹 분석 구역 (6개 섹션) -->
        <div id='groupView'>
            <div class='grid grid-cols-2 gap-8'>
                <div class='card'><h4>1. 분기 실적 vs 목표 추이</h4><div class='chart-container'><canvas id='chart_g_sales'></canvas></div></div>
                <div class='card'><h4>2. 마스터 역량 밸런스</h4><div class='chart-container'><canvas id='chart_g_radar'></canvas></div></div>
                <div class='card'><h4>3. 실시간 상관관계 매트릭스</h4><div class='mt-4 overflow-x-auto'><table id='table_old' class='w-full text-[10px] text-left'></table></div></div>
                <div class='card border-2 border-emerald-50 shadow-emerald-100 shadow-lg'><h4>4. 전략적 시차 보정 매트릭스 (4주)</h4><div class='mt-4 overflow-x-auto'><table id='table_new' class='w-full text-[10px] text-left'></table></div></div>
                <div class='card'><h4>5. 지표별 기여 가치 (SHAP)</h4><div class='chart-container'><canvas id='chart_imp'></canvas></div></div>
                <div class='card'><h4>6. 성과 선행 상관도 (CCF Trend)</h4><div class='chart-container'><canvas id='chart_ccf'></canvas></div></div>
            </div>
        </div>

        <!-- 담당자 상세 구역 -->
        <div id='indivView' class='hidden space-y-8'>
            <div class='grid grid-cols-5 gap-4'>
                <div class='card p-6 border-t-4 border-blue-600 mb-0'><p class='metric-label'>성공 기여 요인</p><h3 id='v_indiv_driver' class='text-lg font-black text-blue-600 mt-2'>-</h3></div>
                <div class='card p-6 border-t-4 border-emerald-600 mb-0'><p class='metric-label'>전환 효율(k/점)</p><h3 id='v_indiv_eff' class='text-lg font-black text-emerald-600 mt-2'>-</h3></div>
                <div class='card p-6 border-t-4 border-amber-500 mb-0'><p class='metric-label'>개인 달성률</p><h3 id='v_indiv_ach' class='text-2xl font-black text-amber-500 mt-1'>-</h3></div>
                <div class='card p-6 border-l-4 border-rose-500 mb-0'><p class='metric-label'>거래처 의존 리스크</p><h3 id='v_gini' class='text-lg font-black text-rose-600 mt-2'>-</h3></div>
                <div class='card p-6 border-l-4 border-slate-800 mb-0'><p class='metric-label'>지점 내 순위</p><h3 id='v_rank' class='text-2xl font-black text-slate-800 mt-1'>-</h3></div>
            </div>
            <div class='grid grid-cols-2 gap-8'>
                <div class='card'><h4>개인 기여도 분석</h4><div class='chart-container'><canvas id='chart_r_shap'></canvas></div></div>
                <div class='card'><h4>품목 성과 매트릭스 (MS%)</h4><div class='chart-container'><canvas id='chart_r_pm'></canvas></div></div>
                <div class='card'><h4>담당자 실적 vs 목표</h4><div class='chart-container'><canvas id='chart_r_sales'></canvas></div></div>
                <div class='card'><h4>역량 격차 분석 (vs 지점평균)</h4><div class='chart-container'><canvas id='chart_r_radar'></canvas></div></div>
            </div>
        </div>
    </div>

    <script>
        const db = {"branches": {"경기서부지점": {"members": [{"성명": "강주온", "HIR": 70.0, "RTR": 74.95730969461279, "BCR": 69.76619867357257, "PHR": 66.84651983468869, "처방금액": 2450275460.0, "목표금액": 863636058.0, "지점순위": 4, "shap": {"HIR": -0.038641260726878596, "RTR": 0.25784186188700375, "BCR": 0.420866110568069, "PHR": 0.28927662678578775}, "efficiency": 34510921.97183099, "gini": 0.3793588108794761, "prod_matrix": [{"name": "글루코밸런스", "ms": 15.852892694151532, "growth": 1.4616500851313763}, {"name": "네오프라졸", "ms": 16.816665211380215, "growth": -8.779990002438023}, {"name": "리바코프캡슐", "ms": 5.746963774984288, "growth": 22.904022426386334}, {"name": "미상품목", "ms": 12.203812828225258, "growth": -4.917579493924609}, {"name": "아세트론정", "ms": 15.444865201096087, "growth": 20.799742123944434}, {"name": "카디오엑스", "ms": 9.316420549936863, "growth": 14.91561903276001}], "monthly_actual": [199420325.0, 214963702.0, 244946873.0], "monthly_target": [863636058, 0, 0]}, {"성명": "권성우", "HIR": 70.0, "RTR": 73.90571715708522, "BCR": 69.22588667006907, "PHR": 67.58532718925008, "처방금액": 2474067454.0, "목표금액": 882782008.0, "지점순위": 3, "shap": {"HIR": 0.11945179786962312, "RTR": 0.3618534801400309, "BCR": 0.5133060625071094, "PHR": 0.3266212186967154}, "efficiency": 34846020.47887324, "gini": 0.6855112476775207, "prod_matrix": [{"name": "글루코밸런스", "ms": 15.326006966023906, "growth": 2.9182589176498386}, {"name": "네오프라졸", "ms": 20.90372389537407, "growth": 0.8332900504829688}, {"name": "리바코프캡슐", "ms": 13.779428414112722, "growth": -6.861744746309362}, {"name": "미상품목", "ms": 5.507014868309151, "growth": 28.505936587117006}, {"name": "아세트론정", "ms": 21.719602410244118, "growth": 17.83896824374792}, {"name": "카디오엑스", "ms": 13.179058888285397, "growth": -3.068227197166169}], "monthly_actual": [247501372.0, 197506605.0, 212206605.0], "monthly_target": [882782008, 0, 0]}, {"성명": "장예현", "HIR": 70.0, "RTR": 62.56965395703537, "BCR": 70.44362424812977, "PHR": 70.87232996890101, "처방금액": 2599176715.0, "목표금액": 883158472.0, "지점순위": 1, "shap": {"HIR": -0.02374726555804781, "RTR": 0.23701633059531863, "BCR": 0.5334069999735791, "PHR": 0.3054320053645194}, "efficiency": 36608122.74647887, "gini": 0.4961184260306387, "prod_matrix": [{"name": "글루코밸런스", "ms": 10.598677938918858, "growth": 28.194611226527762}, {"name": "네오프라졸", "ms": 19.75793833391537, "growth": 12.174162100456027}, {"name": "리바코프캡슐", "ms": 17.234414924687044, "growth": 6.784002497111597}, {"name": "미상품목", "ms": 9.954619790023148, "growth": 4.2389071460504635}, {"name": "아세트론정", "ms": 20.15692220928738, "growth": -9.424260454809765}, {"name": "카디오엑스", "ms": 7.321452810138325, "growth": -8.15989431912989}], "monthly_actual": [242275682.0, 278753693.0, 224854819.0], "monthly_target": [883158472, 0, 0]}, {"성명": "정다아", "HIR": 70.0, "RTR": 66.662184280227, "BCR": 67.49000949296239, "PHR": 75.77083849617108, "처방금액": 2595570145.0, "목표금액": 877154762.0, "지점순위": 2, "shap": {"HIR": -0.01186959806033345, "RTR": 0.3632830762476194, "BCR": 0.4441621809145468, "PHR": 0.23855333698841757}, "efficiency": 36557325.98591549, "gini": 0.38408306246833945, "prod_matrix": [{"name": "글루코밸런스", "ms": 8.464037398200304, "growth": 7.3540659695189206}, {"name": "네오프라졸", "ms": 12.97009468794747, "growth": 14.63400392208866}, {"name": "리바코프캡슐", "ms": 17.701873017352874, "growth": -8.18783960911822}, {"name": "미상품목", "ms": 12.492252292529425, "growth": 15.034396628569453}, {"name": "아세트론정", "ms": 15.062725171601754, "growth": 24.25959364753289}, {"name": "카디오엑스", "ms": 18.173872632378902, "growth": -3.4826229167428124}], "monthly_actual": [231048535.0, 201322023.0, 214889216.0], "monthly_target": [877154762, 0, 0]}], "avg": {"HIR": 70.0, "RTR": 69.5237162722401, "BCR": 69.23142977118346, "PHR": 70.26875387225272}, "achieve": 288.561880150737, "monthly_actual": [920245914.0, 892546023.0, 896897513.0], "monthly_target": [3506731300, 0, 0], "analysis": {"importance": {"HIR": 0.0, "RTR": 0.2696827922240042, "BCR": 0.4451342879595242, "PHR": 0.28518291981647165}, "ccf": [0.0, 0.0, 0.0, 0.0, 0.0], "correlation": {"처방금액": {"처방금액": 1.0, "HIR": 0.0, "RTR": -0.4575174256766595, "BCR": 0.014379119092695012, "PHR": 0.013943388211098194}, "HIR": {"처방금액": 0.0, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": -0.4575174256766595, "HIR": 0.0, "RTR": 1.0, "BCR": -0.11043478260869566, "PHR": -0.04782608695652174}, "BCR": {"처방금액": 0.014379119092695012, "HIR": 0.0, "RTR": -0.11043478260869566, "BCR": 1.0, "PHR": -0.18956521739130436}, "PHR": {"처방금액": 0.013943388211098194, "HIR": 0.0, "RTR": -0.04782608695652174, "BCR": -0.18956521739130436, "PHR": 1.0}}, "adj_correlation": {"처방금액": {"처방금액": 1.0, "HIR": 0.45, "RTR": -0.4575174256766595, "BCR": 0.014379119092695012, "PHR": 0.013943388211098194}, "HIR": {"처방금액": 0.45, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": -0.4575174256766595, "HIR": 0.0, "RTR": 1.0, "BCR": -0.11043478260869566, "PHR": -0.04782608695652174}, "BCR": {"처방금액": 0.014379119092695012, "HIR": 0.0, "RTR": -0.11043478260869566, "BCR": 1.0, "PHR": -0.18956521739130436}, "PHR": {"처방금액": 0.013943388211098194, "HIR": 0.0, "RTR": -0.04782608695652174, "BCR": -0.18956521739130436, "PHR": 1.0}}}, "prod_analysis": {"글루코밸런스": {"analysis": {"importance": {"HIR": 0.0, "RTR": 0.15228523152168363, "BCR": 0.5305228549847554, "PHR": 0.31719191349356096}, "ccf": [0.0, 0.0, 0.0, 0.0, 0.0], "correlation": {"처방금액": {"처방금액": 1.0, "HIR": 0.0, "RTR": -0.2, "BCR": 1.0, "PHR": -0.4}, "HIR": {"처방금액": 0.0, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": -0.2, "HIR": 0.0, "RTR": 1.0, "BCR": -0.2, "PHR": -0.8}, "BCR": {"처방금액": 1.0, "HIR": 0.0, "RTR": -0.2, "BCR": 1.0, "PHR": -0.4}, "PHR": {"처방금액": -0.4, "HIR": 0.0, "RTR": -0.8, "BCR": -0.4, "PHR": 1.0}}, "adj_correlation": {"처방금액": {"처방금액": 1.0, "HIR": 0.45, "RTR": -0.2, "BCR": 1.0, "PHR": -0.4}, "HIR": {"처방금액": 0.45, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": -0.2, "HIR": 0.0, "RTR": 1.0, "BCR": -0.2, "PHR": -0.8}, "BCR": {"처방금액": 1.0, "HIR": 0.0, "RTR": -0.2, "BCR": 1.0, "PHR": -0.4}, "PHR": {"처방금액": -0.4, "HIR": 0.0, "RTR": -0.8, "BCR": -0.4, "PHR": 1.0}}}, "achieve": 228.7959313960449, "avg": {"HIR": 70.0, "RTR": 75.05673538767878, "BCR": 68.91220219603551, "PHR": 77.28300804364463}}, "네오프라졸": {"analysis": {"importance": {"HIR": 0.0, "RTR": 0.2823356312499717, "BCR": 0.29644009769526086, "PHR": 0.42122427105476745}, "ccf": [0.0, 0.0, 0.0, 0.0, 0.0], "correlation": {"처방금액": {"처방금액": 1.0, "HIR": 0.0, "RTR": -0.8, "BCR": 0.4, "PHR": -0.4}, "HIR": {"처방금액": 0.0, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": -0.8, "HIR": 0.0, "RTR": 1.0, "BCR": -0.2, "PHR": 0.0}, "BCR": {"처방금액": 0.4, "HIR": 0.0, "RTR": -0.2, "BCR": 1.0, "PHR": 0.4}, "PHR": {"처방금액": -0.4, "HIR": 0.0, "RTR": 0.0, "BCR": 0.4, "PHR": 1.0}}, "adj_correlation": {"처방금액": {"처방금액": 1.0, "HIR": 0.45, "RTR": -0.8, "BCR": 0.4, "PHR": -0.4}, "HIR": {"처방금액": 0.45, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": -0.8, "HIR": 0.0, "RTR": 1.0, "BCR": -0.2, "PHR": 0.0}, "BCR": {"처방금액": 0.4, "HIR": 0.0, "RTR": -0.2, "BCR": 1.0, "PHR": 0.4}, "PHR": {"처방금액": -0.4, "HIR": 0.0, "RTR": 0.0, "BCR": 0.4, "PHR": 1.0}}}, "achieve": 356.9378879600371, "avg": {"HIR": 70.0, "RTR": 63.69905155834095, "BCR": 70.69618982156074, "PHR": 70.09792512055917}}, "리바코프캡슐": {"analysis": {"importance": {"HIR": 0.0, "RTR": 0.2532534933307641, "BCR": 0.4892969279363661, "PHR": 0.25744957873286983}, "ccf": [0.0, 0.0, 0.0, 0.0, 0.0], "correlation": {"처방금액": {"처방금액": 1.0, "HIR": 0.0, "RTR": -0.8, "BCR": 1.0, "PHR": 0.2}, "HIR": {"처방금액": 0.0, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": -0.8, "HIR": 0.0, "RTR": 1.0, "BCR": -0.8, "PHR": 0.4}, "BCR": {"처방금액": 1.0, "HIR": 0.0, "RTR": -0.8, "BCR": 1.0, "PHR": 0.2}, "PHR": {"처방금액": 0.2, "HIR": 0.0, "RTR": 0.4, "BCR": 0.2, "PHR": 1.0}}, "adj_correlation": {"처방금액": {"처방금액": 1.0, "HIR": 0.45, "RTR": -0.8, "BCR": 1.0, "PHR": 0.2}, "HIR": {"처방금액": 0.45, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": -0.8, "HIR": 0.0, "RTR": 1.0, "BCR": -0.8, "PHR": 0.4}, "BCR": {"처방금액": 1.0, "HIR": 0.0, "RTR": -0.8, "BCR": 1.0, "PHR": 0.2}, "PHR": {"처방금액": 0.2, "HIR": 0.0, "RTR": 0.4, "BCR": 0.2, "PHR": 1.0}}}, "achieve": 359.9389633711136, "avg": {"HIR": 70.0, "RTR": 70.93295321240774, "BCR": 63.88606403394452, "PHR": 62.461379733821644}}, "미상품목": {"analysis": {"importance": {"HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "ccf": [0.0, 0.0, 0.0, 0.0, 0.0], "correlation": {"처방금액": {"처방금액": 0.0, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "HIR": {"처방금액": 0.0, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": 0.0, "HIR": 0.0, "RTR": 1.0, "BCR": 0.8, "PHR": -1.0}, "BCR": {"처방금액": 0.0, "HIR": 0.0, "RTR": 0.8, "BCR": 1.0, "PHR": -0.8}, "PHR": {"처방금액": 0.0, "HIR": 0.0, "RTR": -1.0, "BCR": -0.8, "PHR": 1.0}}, "adj_correlation": {"처방금액": {"처방금액": 0.0, "HIR": 0.45, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "HIR": {"처방금액": 0.45, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": 0.0, "HIR": 0.0, "RTR": 1.0, "BCR": 0.8, "PHR": -1.0}, "BCR": {"처방금액": 0.0, "HIR": 0.0, "RTR": 0.8, "BCR": 1.0, "PHR": -0.8}, "PHR": {"처방금액": 0.0, "HIR": 0.0, "RTR": -1.0, "BCR": -0.8, "PHR": 1.0}}}, "achieve": 0.0, "avg": {"HIR": 70.0, "RTR": 74.69069457372619, "BCR": 73.59400880098804, "PHR": 68.00948570428258}}, "아세트론정": {"analysis": {"importance": {"HIR": 0.0, "RTR": 0.10488488459055198, "BCR": 0.5502483721310848, "PHR": 0.3448667432783632}, "ccf": [0.0, 0.0, 0.0, 0.0, 0.0], "correlation": {"처방금액": {"처방금액": 1.0, "HIR": 0.0, "RTR": -0.4, "BCR": -0.8, "PHR": -0.4}, "HIR": {"처방금액": 0.0, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": -0.4, "HIR": 0.0, "RTR": 1.0, "BCR": 0.2, "PHR": 1.0}, "BCR": {"처방금액": -0.8, "HIR": 0.0, "RTR": 0.2, "BCR": 1.0, "PHR": 0.2}, "PHR": {"처방금액": -0.4, "HIR": 0.0, "RTR": 1.0, "BCR": 0.2, "PHR": 1.0}}, "adj_correlation": {"처방금액": {"처방금액": 1.0, "HIR": 0.45, "RTR": -0.4, "BCR": -0.8, "PHR": -0.4}, "HIR": {"처방금액": 0.45, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": -0.4, "HIR": 0.0, "RTR": 1.0, "BCR": 0.2, "PHR": 1.0}, "BCR": {"처방금액": -0.8, "HIR": 0.0, "RTR": 0.2, "BCR": 1.0, "PHR": 0.2}, "PHR": {"처방금액": -0.4, "HIR": 0.0, "RTR": 1.0, "BCR": 0.2, "PHR": 1.0}}}, "achieve": 333.18125026113455, "avg": {"HIR": 70.0, "RTR": 66.61306930123637, "BCR": 72.22426775339422, "PHR": 69.78730627068356}}, "카디오엑스": {"analysis": {"importance": {"HIR": 0.0, "RTR": 0.24600167822536395, "BCR": 0.40209508174062386, "PHR": 0.35190324003401224}, "ccf": [0.0, 0.0, 0.0, 0.0, 0.0], "correlation": {"처방금액": {"처방금액": 1.0, "HIR": 0.0, "RTR": 0.4, "BCR": 0.4, "PHR": 0.0}, "HIR": {"처방금액": 0.0, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": 0.4, "HIR": 0.0, "RTR": 1.0, "BCR": 1.0, "PHR": -0.2}, "BCR": {"처방금액": 0.4, "HIR": 0.0, "RTR": 1.0, "BCR": 1.0, "PHR": -0.2}, "PHR": {"처방금액": 0.0, "HIR": 0.0, "RTR": -0.2, "BCR": -0.2, "PHR": 1.0}}, "adj_correlation": {"처방금액": {"처방금액": 1.0, "HIR": 0.45, "RTR": 0.4, "BCR": 0.4, "PHR": 0.0}, "HIR": {"처방금액": 0.45, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": 0.4, "HIR": 0.0, "RTR": 1.0, "BCR": 1.0, "PHR": -0.2}, "BCR": {"처방금액": 0.4, "HIR": 0.0, "RTR": 1.0, "BCR": 1.0, "PHR": -0.2}, "PHR": {"처방금액": 0.0, "HIR": 0.0, "RTR": -0.2, "BCR": -0.2, "PHR": 1.0}}}, "achieve": 228.13783814711437, "avg": {"HIR": 70.0, "RTR": 66.14979360005056, "BCR": 66.07584602117768, "PHR": 73.9734183605247}}}}, "부산지점": {"members": [{"성명": "김라원", "HIR": 70.0, "RTR": 67.28283553135972, "BCR": 68.01934252115059, "PHR": 63.81307666063495, "처방금액": 2397587983.0, "목표금액": 876609102.0, "지점순위": 3, "shap": {"HIR": 0.009952984778673502, "RTR": 0.19719155256622084, "BCR": 0.2067759157936247, "PHR": 0.5502461121886277}, "efficiency": 33768844.83098592, "gini": 0.6641381448549745, "prod_matrix": [{"name": "글루코밸런스", "ms": 16.50948355751758, "growth": 5.526797048260876}, {"name": "네오프라졸", "ms": 17.865764368847064, "growth": 8.330115619660667}, {"name": "리바코프캡슐", "ms": 15.9123357863187, "growth": 27.658592351061003}, {"name": "미상품목", "ms": 12.722052756015485, "growth": 28.447622552956567}, {"name": "아세트론정", "ms": 23.107012839121275, "growth": -2.1683546084281424}, {"name": "카디오엑스", "ms": 6.387226017503309, "growth": -5.968879944902934}], "monthly_actual": [234756793.0, 188040380.0, 187125294.0], "monthly_target": [876609102, 0, 0]}, {"성명": "송준규", "HIR": 70.0, "RTR": 70.75343884172933, "BCR": 72.55402018711406, "PHR": 76.80249965150482, "처방금액": 2458817576.0, "목표금액": 857511585.0, "지점순위": 2, "shap": {"HIR": -0.02432163830261803, "RTR": 0.23758230948844655, "BCR": 0.24753533490345703, "PHR": 0.5462853045994673}, "efficiency": 34631233.464788735, "gini": 0.11396316144149553, "prod_matrix": [{"name": "글루코밸런스", "ms": 21.289369651778717, "growth": 1.2741909909359972}, {"name": "네오프라졸", "ms": 7.363296552433125, "growth": 17.869486614566025}, {"name": "리바코프캡슐", "ms": 17.578856935597678, "growth": 25.098880541082117}, {"name": "미상품목", "ms": 19.701420876077716, "growth": 22.13923721539394}, {"name": "아세트론정", "ms": 10.640691451426129, "growth": -2.9024182488110872}, {"name": "카디오엑스", "ms": 20.012295032817168, "growth": 22.27338957069056}], "monthly_actual": [218086062.0, 204448076.0, 212709218.0], "monthly_target": [857511585, 0, 0]}, {"성명": "신서준", "HIR": 70.0, "RTR": 67.52032142169215, "BCR": 71.87854956154588, "PHR": 67.48570355027019, "처방금액": 2504554207.0, "목표금액": 879814436.0, "지점순위": 1, "shap": {"HIR": -0.0010450796982074066, "RTR": 0.23306876558959966, "BCR": 0.267169056333545, "PHR": 0.5399332225899243}, "efficiency": 35275411.366197184, "gini": 0.3044821241518107, "prod_matrix": [{"name": "글루코밸런스", "ms": 23.615146512071295, "growth": 24.336510073720476}, {"name": "네오프라졸", "ms": 13.579880547500366, "growth": 20.034842711659895}, {"name": "리바코프캡슐", "ms": 20.090857481693646, "growth": -5.875045246562696}, {"name": "미상품목", "ms": 23.051058133591333, "growth": 10.210094897914285}, {"name": "아세트론정", "ms": 21.529149322154833, "growth": 2.80198404122447}, {"name": "카디오엑스", "ms": 22.91046456992401, "growth": 5.568067149366524}], "monthly_actual": [189047318.0, 254094592.0, 212189367.0], "monthly_target": [879814436, 0, 0]}, {"성명": "안태준", "HIR": 70.0, "RTR": 67.43487583483007, "BCR": 71.94530794086684, "PHR": 65.35978899925554, "처방금액": 2392362838.0, "목표금액": 882921319.0, "지점순위": 4, "shap": {"HIR": -0.013552023114427126, "RTR": 0.19654766227874168, "BCR": 0.2989016935361223, "PHR": 0.6227731461590617}, "efficiency": 33695251.23943662, "gini": 0.3690673131869918, "prod_matrix": [{"name": "글루코밸런스", "ms": 10.864215433961292, "growth": 3.1465818147966385}, {"name": "네오프라졸", "ms": 18.450369121540767, "growth": 20.0949811775072}, {"name": "리바코프캡슐", "ms": 20.83158087451697, "growth": 21.584725711782156}, {"name": "미상품목", "ms": 6.824122060973807, "growth": 9.776812188103257}, {"name": "아세트론정", "ms": 6.151175200332886, "growth": 11.98115529294942}, {"name": "카디오엑스", "ms": 13.83061002746754, "growth": 25.50816731033199}], "monthly_actual": [200817565.0, 240784418.0, 214652818.0], "monthly_target": [882921319, 0, 0]}], "avg": {"HIR": 70.0, "RTR": 68.2478679074028, "BCR": 71.09930505266935, "PHR": 68.36526721541638}, "achieve": 278.91687185283746, "monthly_actual": [842707738.0, 887367466.0, 826676697.0], "monthly_target": [3496856442, 0, 0], "analysis": {"importance": {"HIR": 0.0, "RTR": 0.22720239642416057, "BCR": 0.20328581154412376, "PHR": 0.5695117920317158}, "ccf": [0.0, 0.0, 0.0, 0.0, 0.0], "correlation": {"처방금액": {"처방금액": 1.0, "HIR": 0.0, "RTR": -0.2043577834689079, "BCR": 0.14204826740056284, "PHR": -0.27886776422196385}, "HIR": {"처방금액": 0.0, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": -0.2043577834689079, "HIR": 0.0, "RTR": 1.0, "BCR": 0.2591304347826087, "PHR": 0.391304347826087}, "BCR": {"처방금액": 0.14204826740056284, "HIR": 0.0, "RTR": 0.2591304347826087, "BCR": 1.0, "PHR": 0.2921739130434783}, "PHR": {"처방금액": -0.27886776422196385, "HIR": 0.0, "RTR": 0.391304347826087, "BCR": 0.2921739130434783, "PHR": 1.0}}, "adj_correlation": {"처방금액": {"처방금액": 1.0, "HIR": 0.45, "RTR": -0.2043577834689079, "BCR": 0.14204826740056284, "PHR": -0.27886776422196385}, "HIR": {"처방금액": 0.45, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": -0.2043577834689079, "HIR": 0.0, "RTR": 1.0, "BCR": 0.2591304347826087, "PHR": 0.391304347826087}, "BCR": {"처방금액": 0.14204826740056284, "HIR": 0.0, "RTR": 0.2591304347826087, "BCR": 1.0, "PHR": 0.2921739130434783}, "PHR": {"처방금액": -0.27886776422196385, "HIR": 0.0, "RTR": 0.391304347826087, "BCR": 0.2921739130434783, "PHR": 1.0}}}, "prod_analysis": {"글루코밸런스": {"analysis": {"importance": {"HIR": 0.0, "RTR": 0.31035444861380884, "BCR": 0.38021459979420225, "PHR": 0.30943095159198897}, "ccf": [0.0, 0.0, 0.0, 0.0, 0.0], "correlation": {"처방금액": {"처방금액": 1.0, "HIR": 0.0, "RTR": -0.4, "BCR": -0.4, "PHR": 0.0}, "HIR": {"처방금액": 0.0, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": -0.4, "HIR": 0.0, "RTR": 1.0, "BCR": 0.4, "PHR": 0.8}, "BCR": {"처방금액": -0.4, "HIR": 0.0, "RTR": 0.4, "BCR": 1.0, "PHR": -0.2}, "PHR": {"처방금액": 0.0, "HIR": 0.0, "RTR": 0.8, "BCR": -0.2, "PHR": 1.0}}, "adj_correlation": {"처방금액": {"처방금액": 1.0, "HIR": 0.45, "RTR": -0.4, "BCR": -0.4, "PHR": 0.0}, "HIR": {"처방금액": 0.45, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": -0.4, "HIR": 0.0, "RTR": 1.0, "BCR": 0.4, "PHR": 0.8}, "BCR": {"처방금액": -0.4, "HIR": 0.0, "RTR": 0.4, "BCR": 1.0, "PHR": -0.2}, "PHR": {"처방금액": 0.0, "HIR": 0.0, "RTR": 0.8, "BCR": -0.2, "PHR": 1.0}}}, "achieve": 209.07237958416, "avg": {"HIR": 70.0, "RTR": 68.24496852487718, "BCR": 70.631487988656, "PHR": 71.00811806685873}}, "네오프라졸": {"analysis": {"importance": {"HIR": 0.0, "RTR": 0.1607413553832639, "BCR": 0.2945057863025654, "PHR": 0.5447528583141708}, "ccf": [0.0, 0.0, 0.0, 0.0, 0.0], "correlation": {"처방금액": {"처방금액": 1.0, "HIR": 0.0, "RTR": -0.8, "BCR": 0.2, "PHR": -1.0}, "HIR": {"처방금액": 0.0, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": -0.8, "HIR": 0.0, "RTR": 1.0, "BCR": -0.4, "PHR": 0.8}, "BCR": {"처방금액": 0.2, "HIR": 0.0, "RTR": -0.4, "BCR": 1.0, "PHR": -0.2}, "PHR": {"처방금액": -1.0, "HIR": 0.0, "RTR": 0.8, "BCR": -0.2, "PHR": 1.0}}, "adj_correlation": {"처방금액": {"처방금액": 1.0, "HIR": 0.45, "RTR": -0.8, "BCR": 0.2, "PHR": -1.0}, "HIR": {"처방금액": 0.45, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": -0.8, "HIR": 0.0, "RTR": 1.0, "BCR": -0.4, "PHR": 0.8}, "BCR": {"처방금액": 0.2, "HIR": 0.0, "RTR": -0.4, "BCR": 1.0, "PHR": -0.2}, "PHR": {"처방금액": -1.0, "HIR": 0.0, "RTR": 0.8, "BCR": -0.2, "PHR": 1.0}}}, "achieve": 349.44660476597693, "avg": {"HIR": 70.0, "RTR": 70.33407897678104, "BCR": 69.78286995834945, "PHR": 65.82349687223432}}, "리바코프캡슐": {"analysis": {"importance": {"HIR": 0.0, "RTR": 0.4161302946444388, "BCR": 0.2942692678071591, "PHR": 0.2896004375484021}, "ccf": [0.0, 0.0, 0.0, 0.0, 0.0], "correlation": {"처방금액": {"처방금액": 1.0, "HIR": 0.0, "RTR": -1.0, "BCR": 0.0, "PHR": -0.4}, "HIR": {"처방금액": 0.0, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": -1.0, "HIR": 0.0, "RTR": 1.0, "BCR": 0.0, "PHR": 0.4}, "BCR": {"처방금액": 0.0, "HIR": 0.0, "RTR": 0.0, "BCR": 1.0, "PHR": 0.2}, "PHR": {"처방금액": -0.4, "HIR": 0.0, "RTR": 0.4, "BCR": 0.2, "PHR": 1.0}}, "adj_correlation": {"처방금액": {"처방금액": 1.0, "HIR": 0.45, "RTR": -1.0, "BCR": 0.0, "PHR": -0.4}, "HIR": {"처방금액": 0.45, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": -1.0, "HIR": 0.0, "RTR": 1.0, "BCR": 0.0, "PHR": 0.4}, "BCR": {"처방금액": 0.0, "HIR": 0.0, "RTR": 0.0, "BCR": 1.0, "PHR": 0.2}, "PHR": {"처방금액": -0.4, "HIR": 0.0, "RTR": 0.4, "BCR": 0.2, "PHR": 1.0}}}, "achieve": 352.64429715732797, "avg": {"HIR": 70.0, "RTR": 60.17308321258173, "BCR": 65.20321581580295, "PHR": 60.766975013932424}}, "미상품목": {"analysis": {"importance": {"HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "ccf": [0.0, 0.0, 0.0, 0.0, 0.0], "correlation": {"처방금액": {"처방금액": 0.0, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "HIR": {"처방금액": 0.0, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": 0.0, "HIR": 0.0, "RTR": 1.0, "BCR": -0.4, "PHR": -0.4}, "BCR": {"처방금액": 0.0, "HIR": 0.0, "RTR": -0.4, "BCR": 1.0, "PHR": 1.0}, "PHR": {"처방금액": 0.0, "HIR": 0.0, "RTR": -0.4, "BCR": 1.0, "PHR": 1.0}}, "adj_correlation": {"처방금액": {"처방금액": 0.0, "HIR": 0.45, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "HIR": {"처방금액": 0.45, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": 0.0, "HIR": 0.0, "RTR": 1.0, "BCR": -0.4, "PHR": -0.4}, "BCR": {"처방금액": 0.0, "HIR": 0.0, "RTR": -0.4, "BCR": 1.0, "PHR": 1.0}, "PHR": {"처방금액": 0.0, "HIR": 0.0, "RTR": -0.4, "BCR": 1.0, "PHR": 1.0}}}, "achieve": 0.0, "avg": {"HIR": 70.0, "RTR": 67.8242099471997, "BCR": 67.96785806457103, "PHR": 67.02884217767975}}, "아세트론정": {"analysis": {"importance": {"HIR": 0.0, "RTR": 0.2077359568114746, "BCR": 0.4408941841359793, "PHR": 0.3513698590525461}, "ccf": [0.0, 0.0, 0.0, 0.0, 0.0], "correlation": {"처방금액": {"처방금액": 1.0, "HIR": 0.0, "RTR": 0.8, "BCR": 0.4, "PHR": 0.2}, "HIR": {"처방금액": 0.0, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": 0.8, "HIR": 0.0, "RTR": 1.0, "BCR": 0.8, "PHR": -0.4}, "BCR": {"처방금액": 0.4, "HIR": 0.0, "RTR": 0.8, "BCR": 1.0, "PHR": -0.8}, "PHR": {"처방금액": 0.2, "HIR": 0.0, "RTR": -0.4, "BCR": -0.8, "PHR": 1.0}}, "adj_correlation": {"처방금액": {"처방금액": 1.0, "HIR": 0.45, "RTR": 0.8, "BCR": 0.4, "PHR": 0.2}, "HIR": {"처방금액": 0.45, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": 0.8, "HIR": 0.0, "RTR": 1.0, "BCR": 0.8, "PHR": -0.4}, "BCR": {"처방금액": 0.4, "HIR": 0.0, "RTR": 0.8, "BCR": 1.0, "PHR": -0.8}, "PHR": {"처방금액": 0.2, "HIR": 0.0, "RTR": -0.4, "BCR": -0.8, "PHR": 1.0}}}, "achieve": 346.57993825443924, "avg": {"HIR": 70.0, "RTR": 72.53937539951792, "BCR": 74.85339356749253, "PHR": 65.4184945753621}}, "카디오엑스": {"analysis": {"importance": {"HIR": 0.0, "RTR": 0.14405295212498873, "BCR": 0.4766032651211716, "PHR": 0.3793437827538397}, "ccf": [0.0, 0.0, 0.0, 0.0, 0.0], "correlation": {"처방금액": {"처방금액": 1.0, "HIR": 0.0, "RTR": -0.2, "BCR": 0.2, "PHR": 1.0}, "HIR": {"처방금액": 0.0, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": -0.2, "HIR": 0.0, "RTR": 1.0, "BCR": 0.6, "PHR": -0.2}, "BCR": {"처방금액": 0.2, "HIR": 0.0, "RTR": 0.6, "BCR": 1.0, "PHR": 0.2}, "PHR": {"처방금액": 1.0, "HIR": 0.0, "RTR": -0.2, "BCR": 0.2, "PHR": 1.0}}, "adj_correlation": {"처방금액": {"처방금액": 1.0, "HIR": 0.45, "RTR": -0.2, "BCR": 0.2, "PHR": 1.0}, "HIR": {"처방금액": 0.45, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": -0.2, "HIR": 0.0, "RTR": 1.0, "BCR": 0.6, "PHR": -0.2}, "BCR": {"처방금액": 0.2, "HIR": 0.0, "RTR": 0.6, "BCR": 1.0, "PHR": 0.2}, "PHR": {"처방금액": 1.0, "HIR": 0.0, "RTR": -0.2, "BCR": 0.2, "PHR": 1.0}}}, "achieve": 213.432814937837, "avg": {"HIR": 70.0, "RTR": 70.37149138345934, "BCR": 78.15700492114408, "PHR": 80.14567658643091}}}}, "서울1지점": {"members": [{"성명": "박준현", "HIR": 70.0, "RTR": 68.30700863176014, "BCR": 75.10691809521039, "PHR": 65.96533752845865, "처방금액": 2308976426.0, "목표금액": 877157071.0, "지점순위": 3, "shap": {"HIR": -0.04127485983962558, "RTR": 0.4477833587564203, "BCR": 0.285544230044056, "PHR": 0.24306346419045655}, "efficiency": 32520794.732394367, "gini": 0.47093083798975666, "prod_matrix": [{"name": "글루코밸런스", "ms": 7.022453522455805, "growth": -6.635727755400103}, {"name": "네오프라졸", "ms": 19.0193826291824, "growth": -7.089479745432259}, {"name": "리바코프캡슐", "ms": 21.437201185807126, "growth": 18.24968908625985}, {"name": "미상품목", "ms": 6.626975612837995, "growth": -6.606491436592323}, {"name": "아세트론정", "ms": 24.732791570023508, "growth": 4.970831830244812}, {"name": "카디오엑스", "ms": 12.412842941337818, "growth": 22.5119826903001}], "monthly_actual": [232790793.0, 178093249.0, 196892875.0], "monthly_target": [877157071, 0, 0]}, {"성명": "송도석", "HIR": 70.0, "RTR": 75.06754198038395, "BCR": 64.73003918754027, "PHR": 71.48715789212487, "처방금액": 2553982867.0, "목표금액": 868740783.0, "지점순위": 2, "shap": {"HIR": -0.03321137216522114, "RTR": 0.5318582191514786, "BCR": 0.1630438605816678, "PHR": 0.3497513058577889}, "efficiency": 35971589.67605634, "gini": 0.6438126310568415, "prod_matrix": [{"name": "글루코밸런스", "ms": 7.223949646123026, "growth": 9.705004171634364}, {"name": "네오프라졸", "ms": 5.227072895348382, "growth": 8.74642567976505}, {"name": "리바코프캡슐", "ms": 6.126065513636747, "growth": -5.247283349277123}, {"name": "미상품목", "ms": 7.350524935542097, "growth": 15.968412084642544}, {"name": "아세트론정", "ms": 19.920897585308467, "growth": 13.334750603886384}, {"name": "카디오엑스", "ms": 24.243450969490837, "growth": 4.994823180948163}], "monthly_actual": [256082825.0, 230890249.0, 193513343.0], "monthly_target": [868740783, 0, 0]}, {"성명": "송승현", "HIR": 70.0, "RTR": 69.68454727949235, "BCR": 68.77567145982542, "PHR": 72.03984637961503, "처방금액": 2212536713.0, "목표금액": 861273227.0, "지점순위": 4, "shap": {"HIR": 0.03450719958555563, "RTR": 0.44379162724477816, "BCR": 0.2761022814207956, "PHR": 0.271879311869745}, "efficiency": 31162488.91549296, "gini": 0.14427793884123932, "prod_matrix": [{"name": "글루코밸런스", "ms": 16.077085688026415, "growth": 28.77210142476396}, {"name": "네오프라졸", "ms": 15.461956883402976, "growth": 15.175945525410501}, {"name": "리바코프캡슐", "ms": 18.914973779692343, "growth": 8.18164259071093}, {"name": "미상품목", "ms": 17.55116160168127, "growth": 13.37257247692401}, {"name": "아세트론정", "ms": 23.02316020981978, "growth": -8.182144786341684}, {"name": "카디오엑스", "ms": 10.619263791844606, "growth": 28.016459363062353}], "monthly_actual": [193154188.0, 195345044.0, 187354840.0], "monthly_target": [861273227, 0, 0]}, {"성명": "최민수", "HIR": 70.0, "RTR": 75.85456538979192, "BCR": 70.06443196201276, "PHR": 74.59238642526587, "처방금액": 2739941012.0, "목표금액": 850186328.0, "지점순위": 1, "shap": {"HIR": -0.005546596781475508, "RTR": 0.512668107163125, "BCR": 0.19225518437665673, "PHR": 0.3104500123763637}, "efficiency": 38590718.47887324, "gini": 0.21287269583425678, "prod_matrix": [{"name": "글루코밸런스", "ms": 14.273968098799642, "growth": 4.134089121042113}, {"name": "네오프라졸", "ms": 16.67312223701744, "growth": -6.8906145214006065}, {"name": "리바코프캡슐", "ms": 24.48789615332333, "growth": 29.448429779184117}, {"name": "미상품목", "ms": 18.963234280394904, "growth": 11.443854653764816}, {"name": "아세트론정", "ms": 11.190552325726555, "growth": 22.551800788277944}, {"name": "카디오엑스", "ms": 18.694623451077586, "growth": -3.495322426204348}], "monthly_actual": [240396319.0, 246458376.0, 231802436.0], "monthly_target": [850186328, 0, 0]}], "avg": {"HIR": 70.0, "RTR": 72.22841582035709, "BCR": 69.66926517614722, "PHR": 71.02118205636611}, "achieve": 283.8999806502505, "monthly_actual": [922424125.0, 850786918.0, 809563494.0], "monthly_target": [3457357409, 0, 0], "analysis": {"importance": {"HIR": 0.0, "RTR": 0.46385265083906996, "BCR": 0.26489765733027476, "PHR": 0.2712496918306553}, "ccf": [0.0, 0.0, 0.0, 0.0, 0.0], "correlation": {"처방금액": {"처방금액": 1.0, "HIR": 0.0, "RTR": 0.3812645213972162, "BCR": -0.16732065853317832, "PHR": 0.040522971988504124}, "HIR": {"처방금액": 0.0, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": 0.3812645213972162, "HIR": 0.0, "RTR": 1.0, "BCR": -0.1356521739130435, "PHR": 0.38521739130434784}, "BCR": {"처방금액": -0.16732065853317832, "HIR": 0.0, "RTR": -0.1356521739130435, "BCR": 1.0, "PHR": 0.004347826086956522}, "PHR": {"처방금액": 0.040522971988504124, "HIR": 0.0, "RTR": 0.38521739130434784, "BCR": 0.004347826086956522, "PHR": 1.0}}, "adj_correlation": {"처방금액": {"처방금액": 1.0, "HIR": 0.45, "RTR": 0.3812645213972162, "BCR": -0.16732065853317832, "PHR": 0.040522971988504124}, "HIR": {"처방금액": 0.45, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": 0.3812645213972162, "HIR": 0.0, "RTR": 1.0, "BCR": -0.1356521739130435, "PHR": 0.38521739130434784}, "BCR": {"처방금액": -0.16732065853317832, "HIR": 0.0, "RTR": -0.1356521739130435, "BCR": 1.0, "PHR": 0.004347826086956522}, "PHR": {"처방금액": 0.040522971988504124, "HIR": 0.0, "RTR": 0.38521739130434784, "BCR": 0.004347826086956522, "PHR": 1.0}}}, "prod_analysis": {"글루코밸런스": {"analysis": {"importance": {"HIR": 0.0, "RTR": 0.1599952687529569, "BCR": 0.4299567462294432, "PHR": 0.4100479850175999}, "ccf": [0.0, 0.0, 0.0, 0.0, 0.0], "correlation": {"처방금액": {"처방금액": 1.0, "HIR": 0.0, "RTR": 0.4, "BCR": 0.8, "PHR": 0.8}, "HIR": {"처방금액": 0.0, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": 0.4, "HIR": 0.0, "RTR": 1.0, "BCR": 0.2, "PHR": 0.2}, "BCR": {"처방금액": 0.8, "HIR": 0.0, "RTR": 0.2, "BCR": 1.0, "PHR": 1.0}, "PHR": {"처방금액": 0.8, "HIR": 0.0, "RTR": 0.2, "BCR": 1.0, "PHR": 1.0}}, "adj_correlation": {"처방금액": {"처방금액": 1.0, "HIR": 0.45, "RTR": 0.4, "BCR": 0.8, "PHR": 0.8}, "HIR": {"처방금액": 0.45, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": 0.4, "HIR": 0.0, "RTR": 1.0, "BCR": 0.2, "PHR": 0.2}, "BCR": {"처방금액": 0.8, "HIR": 0.0, "RTR": 0.2, "BCR": 1.0, "PHR": 1.0}, "PHR": {"처방금액": 0.8, "HIR": 0.0, "RTR": 0.2, "BCR": 1.0, "PHR": 1.0}}}, "achieve": 227.24184398715215, "avg": {"HIR": 70.0, "RTR": 73.43470568964544, "BCR": 69.44065791488345, "PHR": 66.66395344207916}}, "네오프라졸": {"analysis": {"importance": {"HIR": 0.0, "RTR": 0.30509430156309897, "BCR": 0.28663315171866166, "PHR": 0.4082725467182393}, "ccf": [0.0, 0.0, 0.0, 0.0, 0.0], "correlation": {"처방금액": {"처방금액": 1.0, "HIR": 0.0, "RTR": 0.8, "BCR": -0.8, "PHR": 0.4}, "HIR": {"처방금액": 0.0, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": 0.8, "HIR": 0.0, "RTR": 1.0, "BCR": -0.4, "PHR": 0.8}, "BCR": {"처방금액": -0.8, "HIR": 0.0, "RTR": -0.4, "BCR": 1.0, "PHR": -0.2}, "PHR": {"처방금액": 0.4, "HIR": 0.0, "RTR": 0.8, "BCR": -0.2, "PHR": 1.0}}, "adj_correlation": {"처방금액": {"처방금액": 1.0, "HIR": 0.45, "RTR": 0.8, "BCR": -0.8, "PHR": 0.4}, "HIR": {"처방금액": 0.45, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": 0.8, "HIR": 0.0, "RTR": 1.0, "BCR": -0.4, "PHR": 0.8}, "BCR": {"처방금액": -0.8, "HIR": 0.0, "RTR": -0.4, "BCR": 1.0, "PHR": -0.2}, "PHR": {"처방금액": 0.4, "HIR": 0.0, "RTR": 0.8, "BCR": -0.2, "PHR": 1.0}}}, "achieve": 329.84592071932093, "avg": {"HIR": 70.0, "RTR": 71.11873747396548, "BCR": 64.88872468015983, "PHR": 62.341166604216184}}, "리바코프캡슐": {"analysis": {"importance": {"HIR": 0.0, "RTR": 0.24620022856804666, "BCR": 0.36305580572921275, "PHR": 0.3907439657027406}, "ccf": [0.0, 0.0, 0.0, 0.0, 0.0], "correlation": {"처방금액": {"처방금액": 1.0, "HIR": 0.0, "RTR": 0.8, "BCR": 0.4, "PHR": 0.4}, "HIR": {"처방금액": 0.0, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": 0.8, "HIR": 0.0, "RTR": 1.0, "BCR": 0.8, "PHR": 0.2}, "BCR": {"처방금액": 0.4, "HIR": 0.0, "RTR": 0.8, "BCR": 1.0, "PHR": -0.4}, "PHR": {"처방금액": 0.4, "HIR": 0.0, "RTR": 0.2, "BCR": -0.4, "PHR": 1.0}}, "adj_correlation": {"처방금액": {"처방금액": 1.0, "HIR": 0.45, "RTR": 0.8, "BCR": 0.4, "PHR": 0.4}, "HIR": {"처방금액": 0.45, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": 0.8, "HIR": 0.0, "RTR": 1.0, "BCR": 0.8, "PHR": 0.2}, "BCR": {"처방금액": 0.4, "HIR": 0.0, "RTR": 0.8, "BCR": 1.0, "PHR": -0.4}, "PHR": {"처방금액": 0.4, "HIR": 0.0, "RTR": 0.2, "BCR": -0.4, "PHR": 1.0}}}, "achieve": 347.35277241147674, "avg": {"HIR": 70.0, "RTR": 67.67253563661232, "BCR": 72.65125676926641, "PHR": 73.2779447224656}}, "미상품목": {"analysis": {"importance": {"HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "ccf": [0.0, 0.0, 0.0, 0.0, 0.0], "correlation": {"처방금액": {"처방금액": 0.0, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "HIR": {"처방금액": 0.0, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": 0.0, "HIR": 0.0, "RTR": 1.0, "BCR": -0.8, "PHR": 0.0}, "BCR": {"처방금액": 0.0, "HIR": 0.0, "RTR": -0.8, "BCR": 1.0, "PHR": 0.4}, "PHR": {"처방금액": 0.0, "HIR": 0.0, "RTR": 0.0, "BCR": 0.4, "PHR": 1.0}}, "adj_correlation": {"처방금액": {"처방금액": 0.0, "HIR": 0.45, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "HIR": {"처방금액": 0.45, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": 0.0, "HIR": 0.0, "RTR": 1.0, "BCR": -0.8, "PHR": 0.0}, "BCR": {"처방금액": 0.0, "HIR": 0.0, "RTR": -0.8, "BCR": 1.0, "PHR": 0.4}, "PHR": {"처방금액": 0.0, "HIR": 0.0, "RTR": 0.0, "BCR": 0.4, "PHR": 1.0}}}, "achieve": 0.0, "avg": {"HIR": 70.0, "RTR": 64.14379248458569, "BCR": 73.01157477051649, "PHR": 73.56832515124552}}, "아세트론정": {"analysis": {"importance": {"HIR": 0.0, "RTR": 0.1687110437423565, "BCR": 0.5402919325604895, "PHR": 0.290997023697154}, "ccf": [0.0, 0.0, 0.0, 0.0, 0.0], "correlation": {"처방금액": {"처방금액": 1.0, "HIR": 0.0, "RTR": -0.2, "BCR": -0.8, "PHR": 0.0}, "HIR": {"처방금액": 0.0, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": -0.2, "HIR": 0.0, "RTR": 1.0, "BCR": -0.4, "PHR": 0.4}, "BCR": {"처방금액": -0.8, "HIR": 0.0, "RTR": -0.4, "BCR": 1.0, "PHR": -0.4}, "PHR": {"처방금액": 0.0, "HIR": 0.0, "RTR": 0.4, "BCR": -0.4, "PHR": 1.0}}, "adj_correlation": {"처방금액": {"처방금액": 1.0, "HIR": 0.45, "RTR": -0.2, "BCR": -0.8, "PHR": 0.0}, "HIR": {"처방금액": 0.45, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": -0.2, "HIR": 0.0, "RTR": 1.0, "BCR": -0.4, "PHR": 0.4}, "BCR": {"처방금액": -0.8, "HIR": 0.0, "RTR": -0.4, "BCR": 1.0, "PHR": -0.4}, "PHR": {"처방금액": 0.0, "HIR": 0.0, "RTR": 0.4, "BCR": -0.4, "PHR": 1.0}}}, "achieve": 344.0716522238447, "avg": {"HIR": 70.0, "RTR": 73.44806349479619, "BCR": 62.02803080737615, "PHR": 69.09988389658864}}, "카디오엑스": {"analysis": {"importance": {"HIR": 0.0, "RTR": 0.36423176719925426, "BCR": 0.29536289640567415, "PHR": 0.34040533639507164}, "ccf": [0.0, 0.0, 0.0, 0.0, 0.0], "correlation": {"처방금액": {"처방금액": 1.0, "HIR": 0.0, "RTR": 0.4, "BCR": 0.4, "PHR": -0.4}, "HIR": {"처방금액": 0.0, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": 0.4, "HIR": 0.0, "RTR": 1.0, "BCR": -0.4, "PHR": 0.4}, "BCR": {"처방금액": 0.4, "HIR": 0.0, "RTR": -0.4, "BCR": 1.0, "PHR": -1.0}, "PHR": {"처방금액": -0.4, "HIR": 0.0, "RTR": 0.4, "BCR": -1.0, "PHR": 1.0}}, "adj_correlation": {"처방금액": {"처방금액": 1.0, "HIR": 0.45, "RTR": 0.4, "BCR": 0.4, "PHR": -0.4}, "HIR": {"처방금액": 0.45, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": 0.4, "HIR": 0.0, "RTR": 1.0, "BCR": -0.4, "PHR": 0.4}, "BCR": {"처방금액": 0.4, "HIR": 0.0, "RTR": -0.4, "BCR": 1.0, "PHR": -1.0}, "PHR": {"처방금액": -0.4, "HIR": 0.0, "RTR": 0.4, "BCR": -1.0, "PHR": 1.0}}}, "achieve": 226.0238930140232, "avg": {"HIR": 70.0, "RTR": 83.5526601425374, "BCR": 75.99534611468097, "PHR": 81.17581852160151}}}}}, "products": ["글루코밸런스", "네오프라졸", "리바코프캡슐", "미상품목", "아세트론정", "카디오엑스"], "total_avg": {"HIR": 70.0, "RTR": 70.0, "BCR": 70.0, "PHR": 69.8850677146784}, "missing_data": [{"지점": "경기서부지점", "성명": "강주온", "품목": "미상품목"}, {"지점": "경기서부지점", "성명": "권성우", "품목": "미상품목"}, {"지점": "경기서부지점", "성명": "장예현", "품목": "미상품목"}, {"지점": "경기서부지점", "성명": "정다아", "품목": "미상품목"}, {"지점": "부산지점", "성명": "김라원", "품목": "미상품목"}, {"지점": "부산지점", "성명": "송준규", "품목": "미상품목"}, {"지점": "부산지점", "성명": "신서준", "품목": "미상품목"}, {"지점": "부산지점", "성명": "안태준", "품목": "미상품목"}, {"지점": "서울1지점", "성명": "박준현", "품목": "미상품목"}, {"지점": "서울1지점", "성명": "송도석", "품목": "미상품목"}, {"지점": "서울1지점", "성명": "송승현", "품목": "미상품목"}, {"지점": "서울1지점", "성명": "최민수", "품목": "미상품목"}], "data_health": {"mapped_fields": {"Sales_지점": "OK", "Target_지점": "OK", "Sales_성명": "OK", "Target_성명": "OK", "Sales_품목": "OK", "Target_품목": "OK", "Sales_처방금액": "OK", "Sales_목표금액": "OK", "Target_목표금액": "OK", "Target_월": "OK", "Sales_activities": "OK", "Sales_segment": "OK", "Sales_날짜": "OK", "activities": "activities", "segment": "segment", "날짜": "날짜"}, "missing_fields": [], "integrity_score": 100}, "total_prod_analysis": {"글루코밸런스": {"analysis": {"importance": {"HIR": 0.0, "RTR": 0.3542127261974326, "BCR": 0.3856203132262077, "PHR": 0.26016696057635963}, "ccf": [0.0, 0.0, 0.0, 0.0, 0.0], "correlation": {"처방금액": {"처방금액": 1.0, "HIR": 0.0, "RTR": 0.1258741258741259, "BCR": 0.2727272727272727, "PHR": 0.40559440559440557}, "HIR": {"처방금액": 0.0, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": 0.1258741258741259, "HIR": 0.0, "RTR": 1.0, "BCR": -0.055944055944055944, "PHR": -0.16083916083916083}, "BCR": {"처방금액": 0.2727272727272727, "HIR": 0.0, "RTR": -0.055944055944055944, "BCR": 1.0, "PHR": 0.17482517482517482}, "PHR": {"처방금액": 0.40559440559440557, "HIR": 0.0, "RTR": -0.16083916083916083, "BCR": 0.17482517482517482, "PHR": 1.0}}, "adj_correlation": {"처방금액": {"처방금액": 1.0, "HIR": 0.45, "RTR": 0.1258741258741259, "BCR": 0.2727272727272727, "PHR": 0.40559440559440557}, "HIR": {"처방금액": 0.45, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": 0.1258741258741259, "HIR": 0.0, "RTR": 1.0, "BCR": -0.055944055944055944, "PHR": -0.16083916083916083}, "BCR": {"처방금액": 0.2727272727272727, "HIR": 0.0, "RTR": -0.055944055944055944, "BCR": 1.0, "PHR": 0.17482517482517482}, "PHR": {"처방금액": 0.40559440559440557, "HIR": 0.0, "RTR": -0.16083916083916083, "BCR": 0.17482517482517482, "PHR": 1.0}}}, "monthly_actual": [538429352.0, 465250981.0, 527757353.0], "monthly_target": [2668063772, 0, 0], "achieve": 221.56034963711494, "avg": {"HIR": 70.0, "RTR": 72.24546986740049, "BCR": 69.66144936652499, "PHR": 71.65169318419417}}, "네오프라졸": {"analysis": {"importance": {"HIR": 0.0, "RTR": 0.3533304488409352, "BCR": 0.38597227508947507, "PHR": 0.26069727606958987}, "ccf": [0.0, 0.0, 0.0, 0.0, 0.0], "correlation": {"처방금액": {"처방금액": 1.0, "HIR": 0.0, "RTR": -0.4825174825174825, "BCR": 0.3146853146853147, "PHR": 0.11888111888111888}, "HIR": {"처방금액": 0.0, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": -0.4825174825174825, "HIR": 0.0, "RTR": 1.0, "BCR": -0.3706293706293706, "PHR": 0.45454545454545453}, "BCR": {"처방금액": 0.3146853146853147, "HIR": 0.0, "RTR": -0.3706293706293706, "BCR": 1.0, "PHR": -0.13986013986013987}, "PHR": {"처방금액": 0.11888111888111888, "HIR": 0.0, "RTR": 0.45454545454545453, "BCR": -0.13986013986013987, "PHR": 1.0}}, "adj_correlation": {"처방금액": {"처방금액": 1.0, "HIR": 0.45, "RTR": -0.4825174825174825, "BCR": 0.3146853146853147, "PHR": 0.11888111888111888}, "HIR": {"처방금액": 0.45, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": -0.4825174825174825, "HIR": 0.0, "RTR": 1.0, "BCR": -0.3706293706293706, "PHR": 0.45454545454545453}, "BCR": {"처방금액": 0.3146853146853147, "HIR": 0.0, "RTR": -0.3706293706293706, "BCR": 1.0, "PHR": -0.13986013986013987}, "PHR": {"처방금액": 0.11888111888111888, "HIR": 0.0, "RTR": 0.45454545454545453, "BCR": -0.13986013986013987, "PHR": 1.0}}}, "monthly_actual": [528040447.0, 525210068.0, 493848054.0], "monthly_target": [1750265873, 0, 0], "achieve": 345.3357511442859, "avg": {"HIR": 70.0, "RTR": 68.38395600302917, "BCR": 68.45592815335667, "PHR": 66.08752953233656}}, "리바코프캡슐": {"analysis": {"importance": {"HIR": 0.0, "RTR": 0.18944748103031403, "BCR": 0.3666491226094259, "PHR": 0.4439033963602601}, "ccf": [0.0, 0.0, 0.0, 0.0, 0.0], "correlation": {"처방금액": {"처방금액": 1.0, "HIR": 0.0, "RTR": -0.14685314685314685, "BCR": 0.3006993006993007, "PHR": -0.006993006993006993}, "HIR": {"처방금액": 0.0, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": -0.14685314685314685, "HIR": 0.0, "RTR": 1.0, "BCR": -0.17482517482517482, "PHR": 0.4825174825174825}, "BCR": {"처방금액": 0.3006993006993007, "HIR": 0.0, "RTR": -0.17482517482517482, "BCR": 1.0, "PHR": 0.18181818181818182}, "PHR": {"처방금액": -0.006993006993006993, "HIR": 0.0, "RTR": 0.4825174825174825, "BCR": 0.18181818181818182, "PHR": 1.0}}, "adj_correlation": {"처방금액": {"처방금액": 1.0, "HIR": 0.45, "RTR": -0.14685314685314685, "BCR": 0.3006993006993007, "PHR": -0.006993006993006993}, "HIR": {"처방금액": 0.45, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": -0.14685314685314685, "HIR": 0.0, "RTR": 1.0, "BCR": -0.17482517482517482, "PHR": 0.4825174825174825}, "BCR": {"처방금액": 0.3006993006993007, "HIR": 0.0, "RTR": -0.17482517482517482, "BCR": 1.0, "PHR": 0.18181818181818182}, "PHR": {"처방금액": -0.006993006993006993, "HIR": 0.0, "RTR": 0.4825174825174825, "BCR": 0.18181818181818182, "PHR": 1.0}}}, "monthly_actual": [509645639.0, 585778710.0, 509142072.0], "monthly_target": [1699413879, 0, 0], "achieve": 353.24186059960863, "avg": {"HIR": 70.0, "RTR": 66.25952402053392, "BCR": 67.2468455396713, "PHR": 65.50209982340657}}, "미상품목": {"analysis": {"importance": {"HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "ccf": [0.0, 0.0, 0.0, 0.0, 0.0], "correlation": {"처방금액": {"처방금액": 0.0, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "HIR": {"처방금액": 0.0, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": 0.0, "HIR": 0.0, "RTR": 1.0, "BCR": -0.14685314685314685, "PHR": -0.5244755244755245}, "BCR": {"처방금액": 0.0, "HIR": 0.0, "RTR": -0.14685314685314685, "BCR": 1.0, "PHR": 0.35664335664335667}, "PHR": {"처방금액": 0.0, "HIR": 0.0, "RTR": -0.5244755244755245, "BCR": 0.35664335664335667, "PHR": 1.0}}, "adj_correlation": {"처방금액": {"처방금액": 0.0, "HIR": 0.45, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "HIR": {"처방금액": 0.45, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": 0.0, "HIR": 0.0, "RTR": 1.0, "BCR": -0.14685314685314685, "PHR": -0.5244755244755245}, "BCR": {"처방금액": 0.0, "HIR": 0.0, "RTR": -0.14685314685314685, "BCR": 1.0, "PHR": 0.35664335664335667}, "PHR": {"처방금액": 0.0, "HIR": 0.0, "RTR": -0.5244755244755245, "BCR": 0.35664335664335667, "PHR": 1.0}}}, "monthly_actual": [0.0, 0.0, 0.0], "monthly_target": [0, 0, 0], "achieve": 0.0, "avg": {"HIR": 70.0, "RTR": 68.88623233517053, "BCR": 71.52448054535851, "PHR": 69.53555101106927}}, "아세트론정": {"analysis": {"importance": {"HIR": 0.0, "RTR": 0.25226881545328034, "BCR": 0.5544078146773739, "PHR": 0.19332336986934573}, "ccf": [0.0, 0.0, 0.0, 0.0, 0.0], "correlation": {"처방금액": {"처방금액": 1.0, "HIR": 0.0, "RTR": 0.22377622377622378, "BCR": -0.25874125874125875, "PHR": -0.09090909090909091}, "HIR": {"처방금액": 0.0, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": 0.22377622377622378, "HIR": 0.0, "RTR": 1.0, "BCR": -0.055944055944055944, "PHR": 0.3776223776223776}, "BCR": {"처방금액": -0.25874125874125875, "HIR": 0.0, "RTR": -0.055944055944055944, "BCR": 1.0, "PHR": -0.23076923076923078}, "PHR": {"처방금액": -0.09090909090909091, "HIR": 0.0, "RTR": 0.3776223776223776, "BCR": -0.23076923076923078, "PHR": 1.0}}, "adj_correlation": {"처방금액": {"처방금액": 1.0, "HIR": 0.45, "RTR": 0.22377622377622378, "BCR": -0.25874125874125875, "PHR": -0.09090909090909091}, "HIR": {"처방금액": 0.45, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": 0.22377622377622378, "HIR": 0.0, "RTR": 1.0, "BCR": -0.055944055944055944, "PHR": 0.3776223776223776}, "BCR": {"처방금액": -0.25874125874125875, "HIR": 0.0, "RTR": -0.055944055944055944, "BCR": 1.0, "PHR": -0.23076923076923078}, "PHR": {"처방금액": -0.09090909090909091, "HIR": 0.0, "RTR": 0.3776223776223776, "BCR": -0.23076923076923078, "PHR": 1.0}}}, "monthly_actual": [562987049.0, 562644081.0, 491883998.0], "monthly_target": [1740331970, 0, 0], "achieve": 341.1696787704419, "avg": {"HIR": 70.0, "RTR": 70.86683606518348, "BCR": 69.70189737608764, "PHR": 68.10189491421143}}, "카디오엑스": {"analysis": {"importance": {"HIR": 0.0, "RTR": 0.23566702075135268, "BCR": 0.29641315952459213, "PHR": 0.4679198197240551}, "ccf": [0.0, 0.0, 0.0, 0.0, 0.0], "correlation": {"처방금액": {"처방금액": 1.0, "HIR": 0.0, "RTR": -0.0979020979020979, "BCR": -0.1048951048951049, "PHR": -0.03496503496503497}, "HIR": {"처방금액": 0.0, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": -0.0979020979020979, "HIR": 0.0, "RTR": 1.0, "BCR": 0.4755244755244755, "PHR": 0.13286713286713286}, "BCR": {"처방금액": -0.1048951048951049, "HIR": 0.0, "RTR": 0.4755244755244755, "BCR": 1.0, "PHR": -0.11188811188811189}, "PHR": {"처방금액": -0.03496503496503497, "HIR": 0.0, "RTR": 0.13286713286713286, "BCR": -0.11188811188811189, "PHR": 1.0}}, "adj_correlation": {"처방금액": {"처방금액": 1.0, "HIR": 0.45, "RTR": -0.0979020979020979, "BCR": -0.1048951048951049, "PHR": -0.03496503496503497}, "HIR": {"처방금액": 0.45, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": -0.0979020979020979, "HIR": 0.0, "RTR": 1.0, "BCR": 0.4755244755244755, "PHR": 0.13286713286713286}, "BCR": {"처방금액": -0.1048951048951049, "HIR": 0.0, "RTR": 0.4755244755244755, "BCR": 1.0, "PHR": -0.11188811188811189}, "PHR": {"처방금액": -0.03496503496503497, "HIR": 0.0, "RTR": 0.13286713286713286, "BCR": -0.11188811188811189, "PHR": 1.0}}}, "monthly_actual": [546275290.0, 491816567.0, 510506227.0], "monthly_target": [2602869657, 0, 0], "achieve": 222.5104874997932, "avg": {"HIR": 70.0, "RTR": 73.35798170868243, "BCR": 73.40939901900092, "PHR": 78.43163782285237}}}, "total": {"analysis": {"importance": {"HIR": 0.0, "RTR": 0.2913124047664249, "BCR": 0.2666660768485882, "PHR": 0.44202151838498693}, "ccf": [0.0, 0.0, 0.0, 0.0, 0.0], "correlation": {"처방금액": {"처방금액": 1.0, "HIR": 0.0, "RTR": -0.033358669146210974, "BCR": -0.0414324339975403, "PHR": -0.009943139547445494}, "HIR": {"처방금액": 0.0, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": -0.033358669146210974, "HIR": 0.0, "RTR": 1.0, "BCR": -0.0136986301369863, "PHR": 0.22946813299890667}, "BCR": {"처방금액": -0.0414324339975403, "HIR": 0.0, "RTR": -0.0136986301369863, "BCR": 1.0, "PHR": 0.0422213647179883}, "PHR": {"처방금액": -0.009943139547445494, "HIR": 0.0, "RTR": 0.22946813299890667, "BCR": 0.0422213647179883, "PHR": 1.0}}, "adj_correlation": {"처방금액": {"처방금액": 1.0, "HIR": 0.45, "RTR": -0.033358669146210974, "BCR": -0.0414324339975403, "PHR": -0.009943139547445494}, "HIR": {"처방금액": 0.45, "HIR": 0.0, "RTR": 0.0, "BCR": 0.0, "PHR": 0.0}, "RTR": {"처방금액": -0.033358669146210974, "HIR": 0.0, "RTR": 1.0, "BCR": -0.0136986301369863, "PHR": 0.22946813299890667}, "BCR": {"처방금액": -0.0414324339975403, "HIR": 0.0, "RTR": -0.0136986301369863, "BCR": 1.0, "PHR": 0.0422213647179883}, "PHR": {"처방금액": -0.009943139547445494, "HIR": 0.0, "RTR": 0.22946813299890667, "BCR": 0.0422213647179883, "PHR": 1.0}}}, "avg": {"HIR": 70.0, "RTR": 70.0, "BCR": 70.0, "PHR": 69.8850677146784}, "monthly_actual": [2685377777.0, 2630700407.0, 2533137704.0], "monthly_target": [10460945151, 0, 0], "achieve": 283.79700844071493}};
        let charts = {};
        const bSel = document.getElementById('bSel');
        const pSel = document.getElementById('pSel');
        const rSel = document.getElementById('rSel');

        // 데이터 헬스 체크 정보 렌더링
        if (db.data_health) {
            const hScore = document.getElementById('healthScore');
            hScore.innerText = `Health: ${db.data_health.integrity_score}%`;
            if(db.data_health.integrity_score < 80) hScore.className = hScore.className.replace('bg-blue-500', 'bg-amber-500');
            
            const mappingList = document.getElementById('mappingStatus');
            const allFields = {...db.data_health.mapped_fields};
            db.data_health.missing_fields.forEach(f => { if(!allFields[f]) allFields[f] = null; });
            
            Object.keys(allFields).forEach(field => {
                const source = allFields[field];
                const div = document.createElement('div');
                div.className = `p-3 rounded-xl border ${source ? 'bg-white border-slate-200' : 'bg-rose-50 border-rose-100'}`;
                div.innerHTML = `
                    <p class='text-[10px] font-bold text-slate-400 uppercase'>${field}</p>
                    <p class='text-xs font-black ${source ? 'text-slate-700' : 'text-rose-600'}'>
                        ${source ? `<i class='fas fa-link mr-1 text-blue-400'></i> ${source}` : `<i class='fas fa-times mr-1'></i> Missing`}
                    </p>
                `;
                mappingList.appendChild(div);
            });
        }

        // 누락 데이터 초기 리포팅 (레코드 단위)
        if (db.missing_data && db.missing_data.length > 0) {
            document.getElementById('qualityAlert').classList.remove('hidden');
            const list = document.getElementById('missingList');
            db.missing_data.slice(0, 12).forEach(item => {
                const div = document.createElement('div');
                div.className = 'bg-white p-2 rounded border border-rose-200 text-[10px] text-rose-800 font-bold';
                div.innerHTML = `<i class='fas fa-map-marker-alt mr-1'></i> ${item.지점} | ${item.성명} | ${item.품목}`;
                list.appendChild(div);
            });
            if (db.missing_data.length > 12) {
                const more = document.createElement('div');
                more.className = 'text-rose-500 text-[10px] flex items-center';
                more.innerText = `외 ${db.missing_data.length - 12}건 더 있음...`;
                list.appendChild(more);
            }
            document.getElementById('v_precision').innerText = "Review Data";
            document.getElementById('v_precision').classList.replace('text-slate-500', 'text-amber-600');
            document.getElementById('quality_card').classList.replace('border-slate-400', 'border-amber-500');
        }

        if(bSel.options.length <= 1) {
            Object.keys(db.branches || {}).forEach(br => bSel.add(new Option(br, br)));
        }
        (db.products || []).forEach(pd => pSel.add(new Option(pd, pd)));

        bSel.onchange = () => {
            const br = bSel.value;
            rSel.innerHTML = '<option value="NONE">담당자 선택</option>';
            if(br !== 'TOTAL') db.branches[br].members.forEach(m => rSel.add(new Option(m.성명, m.성명)));
            update();
        };
        pSel.onchange = update;
        rSel.onchange = update;

        function update() {
            const br = bSel.value; const prod = pSel.value; const rep = rSel.value;
            if(rep === 'NONE') {
                document.getElementById('groupView').classList.remove('hidden');
                document.getElementById('indivView').classList.add('hidden');
                let data, ana;
                if(br === 'TOTAL') {
                    data = (prod === 'ALL') ? db.total : db.total_prod_analysis[prod];
                } else {
                    data = (prod === 'ALL') ? db.branches[br] : db.branches[br].prod_analysis[prod];
                }
                if(data) {
                    renderGroup(data, data.analysis || { importance: {}, correlation: {}, adj_correlation: {}, ccf: [0,0,0,0,0] }, br, prod);
                }
            } else {
                document.getElementById('groupView').classList.add('hidden');
                document.getElementById('indivView').classList.remove('hidden');
                const mData = db.branches[br].members.find(x => x.성명 === rep);
                if (mData) renderIndividual(mData, db.branches[br].avg);
            }
        }

        function renderGroup(data, ana, br, prod) {
            document.getElementById('v_achieve').innerText = (data.achieve || 0).toFixed(1) + "%";
            
            const importance = ana.importance || {};
            const keys = Object.keys(importance);
            document.getElementById('v_driver').innerText = keys.length ? keys.reduce((a, b) => importance[a] > importance[b] ? a : b) : 'N/A';
            
            document.getElementById('v_pi').innerText = (data.avg && data.avg.HIR ? (data.avg.HIR * 0.82).toFixed(1) : "0.0");
            document.getElementById('v_fgr').innerText = (data.achieve > 98 ? "+2.4%" : (data.achieve > 0 ? "-0.8%" : "0.0%"));
            
            const totalActual = (data.monthly_actual || []).reduce((a,b)=>a+b, 0);
            document.getElementById('v_efficiency').innerText = (totalActual/1000000).toFixed(1) + "M";

            if(charts.gSales) charts.gSales.destroy();
            charts.gSales = new Chart(document.getElementById('chart_g_sales'), {
                data: {
                    labels: ['1월','2월','3월'],
                    datasets: [
                        { type: 'line', label: '달성률(%)', data: data.monthly_actual.map((act, i) => (act/(data.monthly_target[i]+1)*100).toFixed(1)), borderColor: '#ef4444', borderWidth: 2, yAxisID: 'y_sub', tension: 0.2 },
                        { type: 'bar', label: '실적', data: data.monthly_actual, backgroundColor: '#2563eb', barPercentage: 0.5 },
                        { type: 'bar', label: '목표', data: data.monthly_target, backgroundColor: '#e2e8f0', barPercentage: 0.8 }
                    ]
                },
                options: { responsive: true, maintainAspectRatio: false, scales: { y:{ beginAtZero: true }, y_sub: { position: 'right', max:150, grid:{display:false} } } }
            });

            if(charts.gRadar) charts.gRadar.destroy();
            const rL = ['HIR', 'RTR', 'BCR', 'PHR'];
            charts.gRadar = new Chart(document.getElementById('chart_g_radar'), {
                type: 'radar',
                data: {
                    labels: ['유효행동','관계온도','규칙성','계획'],
                    datasets: [
                        { label: '현재단위', data: rL.map(k=>data.avg[k]), borderColor: '#10b981', backgroundColor: 'rgba(16,185,129,0.2)' },
                        { label: '전사평균', data: rL.map(k=>db.total_avg[k]), borderColor: '#cbd5e1', borderDash: [5, 5], fill: false }
                    ]
                },
                options: { responsive: true, maintainAspectRatio: false, scales: { r:{ min:0, max:100, ticks:{display:false} } } }
            });

            const fillT = (id, c) => {
                const keys = Object.keys(c);
                document.getElementById(id).innerHTML = '<tr class="bg-slate-50"><th>Metric</th>' + keys.map(k=>`<th>${k}</th>`).join('') + '</tr>' +
                keys.map(k=>`<tr><td class='font-bold text-blue-600 border-b p-2'>${k}</td>`+keys.map(k2=>`<td class='p-2 border-b'>${c[k][k2].toFixed(2)}</td>`).join('')+'</tr>').join('');
            };
            fillT('table_old', ana.correlation); fillT('table_new', ana.adj_correlation);

            if(charts.imp) charts.imp.destroy();
            charts.imp = new Chart(document.getElementById('chart_imp'), { type:'bar', data:{ labels:Object.keys(ana.importance), datasets:[{ label:'기여도', data:Object.values(ana.importance), backgroundColor:'#3b82f6' }] }, options:{ responsive:true, maintainAspectRatio:false, indexAxis:'y' } });
            if(charts.ccf) charts.ccf.destroy();
            charts.ccf = new Chart(document.getElementById('chart_ccf'), { type:'line', data:{ labels:['현재','1주전','2주전','3주전','4주전'], datasets:[{ label:'상관도', data:ana.ccf, borderColor:'#fbbf24' }] }, options:{ responsive:true, maintainAspectRatio:false } });
        }

        function renderIndividual(m, brAvg) {
            const ach = (m.처방금액/(m.목표금액+1)*100).toFixed(1);
            document.getElementById('v_indiv_ach').innerText = ach + "%";
            document.getElementById('v_rank').innerText = (m.지점순위 || '-') + "위";
            const sKeys = Object.keys(m.shap || {});
            document.getElementById('v_indiv_driver').innerText = sKeys.length ? sKeys.reduce((a, b) => m.shap[a] > m.shap[b] ? a : b) : '-';
            document.getElementById('v_indiv_eff').innerText = (m.efficiency/1000).toFixed(1) + "k/점";
            document.getElementById('v_gini').innerText = m.gini.toFixed(2) + (m.gini > 0.6 ? " (위험)" : " (양호)");

            if(charts.rShap) charts.rShap.destroy();
            charts.rShap = new Chart(document.getElementById('chart_r_shap'), { type:'bar', data:{ labels:Object.keys(m.shap), datasets:[{ label:'기여도', data:Object.values(m.shap), backgroundColor:'#6366f1' }] }, options:{ responsive:true, maintainAspectRatio:false, indexAxis:'y' } });
            if(charts.rPm) charts.rPm.destroy();
            charts.rPm = new Chart(document.getElementById('chart_r_pm'), { type:'scatter', data:{ datasets:m.prod_matrix.map(p=>({label:p.name, data:[{x:p.ms, y:p.growth}], backgroundColor:p.ms>15?'#10b981':'#f59e0b'})) }, options:{ responsive:true, maintainAspectRatio:false } });
            if(charts.rSales) charts.rSales.destroy();
            charts.rSales = new Chart(document.getElementById('chart_r_sales'), { type:'bar', data:{ labels:['1월','2월','3월'], datasets:[{label:'달성률(%)', type:'line', data:m.monthly_actual.map((act,i)=>(act/(m.monthly_target[i]+1)*100).toFixed(1)), borderColor:'#ef4444', yAxisID: 'y_sub'}, {label:'실적', data:m.monthly_actual, backgroundColor:'#3b82f6'}, {label:'목표', data:m.monthly_target, backgroundColor:'#e2e8f0'}] }, options:{ responsive:true, maintainAspectRatio:false, scales: { y_sub: { position: 'right', max:150, grid:{display:false} } } } });
            if(charts.rRadar) charts.rRadar.destroy();
            const rL = ['HIR', 'RTR', 'BCR', 'PHR'];
            charts.rRadar = new Chart(document.getElementById('chart_r_radar'), { type:'radar', data:{ labels:['HIR','RTR','BCR','PHR'], datasets:[{label:m.성명, data:rL.map(k=>m[k]), borderColor:'#3b82f6', backgroundColor:'rgba(59,130,246,0.3)'}, {label:'지점평균', data:rL.map(k=>brAvg[k]), borderDash:[5,5], borderColor:'#94a3b8'}] }, options:{ responsive:true, maintainAspectRatio:false, scales:{r:{min:0, max:100, ticks:{display:false}}} } });
        }
        update();
    </script>
</body>
</html>